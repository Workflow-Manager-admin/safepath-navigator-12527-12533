{"is_source_file": true, "format": "JavaScript", "description": "This file defines a service module for interacting with the FBI Crime Data API, providing functions to retrieve crime statistics by location, coordinates, and national trends, as well as generating safety recommendations based on crime data.", "external_files": ["fetch API (built-in)", "process.env for environment variables"], "external_methods": ["fetch"], "published": ["getCrimeStatsByLocation", "getCrimeStatsByCoordinates", "getNationalCrimeTrends", "getSafetyRecommendations"], "classes": [], "methods": [{"name": "getCrimeStatsByLocation", "description": "Fetches crime statistics for a specified state and city using the FBI API."}, {"name": "getCrimeStatsByCoordinates", "description": "Simulates retrieval of crime data based on geographic coordinates by modeling proximity to known high-crime areas."}, {"name": "getNationalCrimeTrends", "description": "Retrieves national crime trend data over a specified number of past years."}, {"name": "getSafetyRecommendations", "description": "Provides safety advice based on crime statistics data."}], "calls": ["fetch"], "search-terms": ["FBI Crime Data API", "crime statistics by location", "coordinates crime data", "national crime trends", "safety recommendations"], "state": 2, "file_id": 33, "knowledge_revision": 99, "git_revision": "c58d94ece64623784d792324474d66503e3b2753", "revision_history": [{"88": "3142f2ffa1fcfffb1280955ee0830876c1615643"}, {"99": "c58d94ece64623784d792324474d66503e3b2753"}], "ctags": [{"_type": "tag", "name": "API_KEY", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^const API_KEY = process.env.REACT_APP_FBI_CRIME_DATA_API_KEY || '2kEBAO7elawjoAAKFdgfErFxPS8ODR8/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "FBI_API_BASE_URL", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^const FBI_API_BASE_URL = 'https:\\/\\/api.usa.gov\\/crime\\/fbi\\/sapi';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "aggravated-assault", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^      'aggravated-assault': getRandomWeightedValue(lat, lng, 15)$/", "language": "JavaScript", "kind": "property", "scope": "crimeRatesByType", "scopeKind": "class"}, {"_type": "tag", "name": "calculateSafetyScore", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^const calculateSafetyScore = (crimeRate) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "closestDistance", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^  let closestDistance = Number.MAX_VALUE;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "closestWeight", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^  let closestWeight = 0;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "crimeRatesByType", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^    const crimeRatesByType = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^    const data = await response.json();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getCrimeStatsByCoordinates", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^export const getCrimeStatsByCoordinates = async (lat, lng, radius = 1) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getCrimeStatsByLocation", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^export const getCrimeStatsByLocation = async (state, city) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getNationalCrimeTrends", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^export const getNationalCrimeTrends = async (yearsBack = 5) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getRandomWeightedValue", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^const getRandomWeightedValue = (lat, lng, maxValue) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getSafetyRecommendations", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^export const getSafetyRecommendations = (crimeStats) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "highCrimeAreas", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^  const highCrimeAreas = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "homicide", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^      'homicide': getRandomWeightedValue(lat, lng, 1),$/", "language": "JavaScript", "kind": "property", "scope": "crimeRatesByType", "scopeKind": "class"}, {"_type": "tag", "name": "maxExpectedCrimeRate", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^  const maxExpectedCrimeRate = 100;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "property-crime", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^      'property-crime': getRandomWeightedValue(lat, lng, 25),$/", "language": "JavaScript", "kind": "property", "scope": "crimeRatesByType", "scopeKind": "class"}, {"_type": "tag", "name": "proximityFactor", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^  const proximityFactor = Math.max(0, 1 - (closestDistance * 100)); \\/\\/ Convert small lat\\/lng /", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "randomVariation", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^  const randomVariation = 0.7 + (Math.random() * 0.6); \\/\\/ Random value between 0.7-1.3$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "rawScore", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^  const rawScore = 100 - ((crimeRate \\/ maxExpectedCrimeRate) * 100);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "recommendations", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^  const recommendations = [];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "response", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^    const response = await fetch(url);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "robbery", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^      'robbery': getRandomWeightedValue(lat, lng, 8),$/", "language": "JavaScript", "kind": "property", "scope": "crimeRatesByType", "scopeKind": "class"}, {"_type": "tag", "name": "startYear", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^    const startYear = currentYear - yearsBack;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "totalRate", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^  const totalRate = crimeStats.totalCrimeRate || 0;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^    const url = `${FBI_API_BASE_URL}\\/api\\/estimates\\/national\\/${startYear}\\/${currentYear}?api/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^    const url = `${FBI_API_BASE_URL}\\/api\\/summarized\\/agencies\\/${state}\\/${encodeURIComponent(/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "violent-crime", "path": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "pattern": "/^      'violent-crime': getRandomWeightedValue(lat, lng, 10),$/", "language": "JavaScript", "kind": "property", "scope": "crimeRatesByType", "scopeKind": "class"}], "filename": "/home/kavia/workspace/code-generation/safepath-navigator-12527-12533/safe_path_navigator/src/services/fbiCrimeDataService.js", "hash": "8476dcad5c190e5635f77a1a74b5a87d", "format-version": 4, "code-base-name": "default", "fields": [{"name": "'aggravated-assault': getRandomWeightedValue(lat, lng, 15)", "scope": "crimeRatesByType", "scopeKind": "class", "description": "unavailable"}, {"name": "let closestDistance = Number.MAX_VALUE;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "let closestWeight = 0;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "'homicide': getRandomWeightedValue(lat, lng, 1),", "scope": "crimeRatesByType", "scopeKind": "class", "description": "unavailable"}, {"name": "'property-crime': getRandomWeightedValue(lat, lng, 25),", "scope": "crimeRatesByType", "scopeKind": "class", "description": "unavailable"}, {"name": "'robbery': getRandomWeightedValue(lat, lng, 8),", "scope": "crimeRatesByType", "scopeKind": "class", "description": "unavailable"}, {"name": "'violent-crime': getRandomWeightedValue(lat, lng, 10),", "scope": "crimeRatesByType", "scopeKind": "class", "description": "unavailable"}]}